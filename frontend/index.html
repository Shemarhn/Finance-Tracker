<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinanceTracker ‚Äî AI-Powered Personal Finance</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ============================================================ -->
    <!-- AUTH SCREENS -->
    <!-- ============================================================ -->
    <div id="auth-screen" class="screen active">
        <div class="auth-container">
            <div class="auth-header">
                <div class="logo">
                    <span class="logo-icon">üí∞</span>
                    <h1>FinanceTracker</h1>
                </div>
                <p class="tagline">AI-Powered Personal Finance Platform</p>
            </div>

            <!-- LOGIN FORM -->
            <div id="login-form" class="auth-form active">
                <h2>Welcome Back</h2>
                <form onsubmit="return handleLogin(event)">
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" placeholder="you@example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full" id="login-btn">
                        <span class="btn-text">Sign In</span>
                        <span class="btn-loader hidden">‚è≥</span>
                    </button>
                </form>
                <p class="auth-switch">Don't have an account? <a href="#" onclick="showRegister()">Sign Up</a></p>
            </div>

            <!-- REGISTER FORM -->
            <div id="register-form" class="auth-form">
                <h2>Create Account</h2>
                <form onsubmit="return handleRegister(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="reg-first">First Name</label>
                            <input type="text" id="reg-first" placeholder="John" required>
                        </div>
                        <div class="form-group">
                            <label for="reg-last">Last Name</label>
                            <input type="text" id="reg-last" placeholder="Doe">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="reg-email">Email</label>
                        <input type="email" id="reg-email" placeholder="you@example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-password">Password</label>
                        <input type="password" id="reg-password" placeholder="Min 8 characters" required minlength="8">
                    </div>
                    <button type="submit" class="btn btn-primary btn-full" id="register-btn">
                        <span class="btn-text">Create Account</span>
                        <span class="btn-loader hidden">‚è≥</span>
                    </button>
                </form>
                <p class="auth-switch">Already have an account? <a href="#" onclick="showLogin()">Sign In</a></p>
            </div>

            <div id="auth-error" class="error-msg hidden"></div>
        </div>
    </div>

    <!-- ============================================================ -->
    <!-- MAIN APP -->
    <!-- ============================================================ -->
    <div id="app-screen" class="screen">
        <!-- SIDEBAR -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <span class="logo-icon">üí∞</span>
                <span class="sidebar-title">FinanceTracker</span>
            </div>
            <ul class="sidebar-nav">
                <li class="nav-item active" data-view="chat" onclick="switchView('chat')">
                    <span class="nav-icon">üí¨</span>
                    <span class="nav-label">Chat</span>
                </li>
                <li class="nav-item" data-view="dashboard" onclick="switchView('dashboard')">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-label">Dashboard</span>
                </li>
                <li class="nav-item" data-view="transactions" onclick="switchView('transactions')">
                    <span class="nav-icon">üìã</span>
                    <span class="nav-label">Transactions</span>
                </li>
                <li class="nav-item" data-view="accounts" onclick="switchView('accounts')">
                    <span class="nav-icon">üè¶</span>
                    <span class="nav-label">Accounts</span>
                </li>
                <li class="nav-item" data-view="subscription" onclick="switchView('subscription')">
                    <span class="nav-icon">‚≠ê</span>
                    <span class="nav-label">Plan</span>
                </li>
            </ul>
            <div class="sidebar-footer">
                <div class="user-info">
                    <span id="user-name">User</span>
                    <span id="user-plan" class="plan-badge">Free</span>
                </div>
                <button class="btn btn-ghost btn-sm" onclick="handleLogout()">Logout</button>
            </div>
        </nav>

        <!-- MAIN CONTENT -->
        <main class="main-content">
            <!-- CHAT VIEW -->
            <div id="view-chat" class="view active">
                <div class="chat-container">
                    <div class="chat-header">
                        <h2>Finance Assistant</h2>
                        <p>Type transactions, ask questions, or manage accounts</p>
                    </div>
                    <div id="chat-messages" class="chat-messages">
                        <div class="message bot">
                            <div class="message-content">
                                <p>üëã Welcome! I'm your AI Finance Assistant.</p>
                                <p><strong>Log transactions:</strong> "Bought groceries 2500, paid rent 45k"</p>
                                <p><strong>Ask questions:</strong> "How much did I spend this week?"</p>
                                <p><strong>Manage accounts:</strong> "I have 30k in NCB and 5k cash"</p>
                                <p><strong>Edit:</strong> "Change the grocery transaction to 3000"</p>
                                <p>You can also upload receipts/screenshots! üì∑</p>
                            </div>
                        </div>
                    </div>
                    <div class="chat-input-area">
                        <div id="image-preview" class="image-preview hidden">
                            <img id="preview-img" src="" alt="Preview">
                            <button class="remove-image" onclick="removeImage()">‚úï</button>
                        </div>
                        <form class="chat-form" onsubmit="return sendMessage(event)">
                            <label class="upload-btn" title="Upload receipt/screenshot">
                                <input type="file" id="image-input" accept="image/*" onchange="handleImageSelect(event)" hidden>
                                üì∑
                            </label>
                            <input type="text" id="message-input" placeholder="Type a message..." autocomplete="off">
                            <button type="submit" class="send-btn" id="send-btn">‚û§</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- DASHBOARD VIEW -->
            <div id="view-dashboard" class="view">
                <div class="dashboard-container">
                    <h2>Dashboard</h2>
                    <div class="stats-grid">
                        <div class="stat-card income">
                            <span class="stat-icon">üíµ</span>
                            <div class="stat-info">
                                <span class="stat-label">Income</span>
                                <span class="stat-value" id="dash-income">J$0.00</span>
                            </div>
                        </div>
                        <div class="stat-card expense">
                            <span class="stat-icon">üí∏</span>
                            <div class="stat-info">
                                <span class="stat-label">Expenses</span>
                                <span class="stat-value" id="dash-expense">J$0.00</span>
                            </div>
                        </div>
                        <div class="stat-card net">
                            <span class="stat-icon">üí∞</span>
                            <div class="stat-info">
                                <span class="stat-label">Net Savings</span>
                                <span class="stat-value" id="dash-net">J$0.00</span>
                            </div>
                        </div>
                        <div class="stat-card count">
                            <span class="stat-icon">üìã</span>
                            <div class="stat-info">
                                <span class="stat-label">Transactions</span>
                                <span class="stat-value" id="dash-count">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <h3>Account Balances</h3>
                        <div id="dash-accounts" class="accounts-list">
                            <p class="empty-state">Loading accounts...</p>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <h3>Recent Transactions</h3>
                        <div id="dash-recent-txns" class="txn-list">
                            <p class="empty-state">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TRANSACTIONS VIEW -->
            <div id="view-transactions" class="view">
                <div class="transactions-container">
                    <div class="view-header">
                        <h2>Transactions</h2>
                        <button class="btn btn-sm btn-outline" onclick="loadTransactions()">Refresh</button>
                    </div>
                    <div id="transactions-list" class="txn-list">
                        <p class="empty-state">Loading transactions...</p>
                    </div>
                    <div class="pagination">
                        <button class="btn btn-sm btn-ghost" id="txn-prev" onclick="loadTransactions('prev')" disabled>‚Üê Prev</button>
                        <span id="txn-page-info">Page 1</span>
                        <button class="btn btn-sm btn-ghost" id="txn-next" onclick="loadTransactions('next')">Next ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- ACCOUNTS VIEW -->
            <div id="view-accounts" class="view">
                <div class="accounts-container">
                    <h2>Accounts</h2>
                    <div id="accounts-detail" class="accounts-detail">
                        <p class="empty-state">Loading accounts...</p>
                    </div>
                    <p class="hint">Chat with the assistant to manage accounts: "I have 30k in NCB"</p>
                </div>
            </div>

            <!-- SUBSCRIPTION VIEW -->
            <div id="view-subscription" class="view">
                <div class="subscription-container">
                    <h2>Subscription</h2>
                    <div id="current-plan" class="plan-info">
                        <p class="empty-state">Loading...</p>
                    </div>

                    <div class="plans-grid">
                        <div class="plan-card free">
                            <h3>Free</h3>
                            <div class="plan-price">J$0<span>/mo</span></div>
                            <ul class="plan-features">
                                <li>‚úÖ 100 transactions/month</li>
                                <li>‚úÖ 3 OCR uploads/month</li>
                                <li>‚úÖ Basic weekly summary</li>
                                <li>‚úÖ Chat assistant</li>
                                <li>‚ùå Budget tracking</li>
                                <li>‚ùå Advanced AI insights</li>
                                <li>‚ùå CSV export</li>
                            </ul>
                        </div>
                        <div class="plan-card pro highlighted">
                            <div class="plan-badge-label">RECOMMENDED</div>
                            <h3>Pro Monthly</h3>
                            <div class="plan-price">J$1,500<span>/mo</span></div>
                            <ul class="plan-features">
                                <li>‚úÖ Unlimited transactions</li>
                                <li>‚úÖ Unlimited OCR uploads</li>
                                <li>‚úÖ Budget tracking</li>
                                <li>‚úÖ Advanced AI insights</li>
                                <li>‚úÖ CSV export</li>
                                <li>‚úÖ Priority support</li>
                                <li>‚úÖ Net worth tracking</li>
                            </ul>
                            <button class="btn btn-primary btn-full" onclick="subscribePro('monthly')">
                                Upgrade to Pro
                            </button>
                        </div>
                        <div class="plan-card pro-yearly">
                            <h3>Pro Yearly</h3>
                            <div class="plan-price">J$15,000<span>/yr</span></div>
                            <p class="plan-savings">Save J$3,000/year</p>
                            <ul class="plan-features">
                                <li>‚úÖ Everything in Pro</li>
                                <li>‚úÖ 2 months free</li>
                                <li>‚úÖ Annual savings report</li>
                            </ul>
                            <button class="btn btn-outline btn-full" onclick="subscribePro('yearly')">
                                Choose Yearly
                            </button>
                        </div>
                    </div>

                    <div class="usage-info">
                        <h3>Current Usage</h3>
                        <div id="usage-details" class="usage-details">
                            <p class="empty-state">Loading usage data...</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div id="toast" class="toast hidden"></div>

    <script src="app.js"></script>
</body>
</html>
